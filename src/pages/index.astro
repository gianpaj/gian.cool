---
import Layout from "../layouts/Layout.astro";
import { getCollection } from "astro:content";

const posts = (await getCollection("blog")).sort((a, b) => b.data.pubDate.getTime() - a.data.pubDate.getTime());
---

<Layout title="Gian.cool Blog">
  <header class="mb-16 md:mb-20">
    <h1 class="font-serif text-5xl md:text-5xl tracking-tight leading-[1.1]">
      Gian.cool
      <span class="block text-muted dark:text-dark-muted text-3xl md:text-3xl italic mt-1">Gianfranco's blog</span>
    </h1>
  </header>

  <section>
    <ul class="space-y-12">
      {
        posts.map((post) => (
          <li class="group">
            <a href={`/blog/${post.id}/`} class="block">
              <time
                datetime={post.data.pubDate.toISOString()}
                class="text-xs font-mono uppercase tracking-widest text-muted dark:text-dark-muted"
              >
                {post.data.pubDate.toLocaleDateString("en-GB", {
                  year: "numeric",
                  month: "short",
                  day: "numeric",
                })}
              </time>
              <h2 class="font-serif text-2xl md:text-3xl mt-1.5 group-hover:text-terracotta dark:group-hover:text-dark-terracotta transition-colors duration-200">
                {post.data.title}
              </h2>
              <p class="mt-3 text-muted dark:text-dark-muted leading-relaxed">{post.data.description.slice(0, 500)}</p>
            </a>
          </li>
        ))
      }
    </ul>
  </section>
</Layout>
